<?php//Inicio la sesion if(!isset($_SESSION))	session_start();//Verifico que este alguien logueado require_once("verificar_sesion.php");//Agrego las clases con las que se va a trabajar require_once("clases/AccesoDatos.php");require_once('clases/lib/nusoap.php');require_once("clases/Usuario.php");//Servido NuSoap$host   = 'http://localhost:8080/abmUsuarios/clases/SERVIDOR/wsUsuarios.php';$client = new nusoap_client($host . '?wsdl');//Opciones$queMuestro = isset($_POST['queMuestro']) ? $_POST['queMuestro'] : NULL;//Genero un objeto Standard a utilizar$obj = new stdClass();//acciones a seguir 		switch ($queMuestro) {        case "ENUNCIADO":                require_once("enunciado.php");                break;    case "MOSTRAR_CD":        require_once("GrillaCd.php");        break;		    case "MOSTRAR_GRILLA":        require_once("formGrilla.php");        break;    case "FORM"://MUESTRA FORM ALTA-MODIFICACION USUARIO        $usuario = isset($_POST["usuario"]) ? json_decode(json_encode($_POST["usuario"])) : NULL;		        require_once("form.php");        break;    case "ALTA_USUARIO":        //Capturo el objeto enviado        $obj = json_decode(json_encode($_POST['usuario']));        $obj->Exito = TRUE;        $obj->Mensaje = "";		        //Llamo al WS para que ingrese un nuevo elemento 		$cantidad = $client->call('Agregar', array('nombre' => $obj->nombre, 'email' => $obj->email, 'perfil' => $obj->perfil, 'pass' => $obj->pass));        //$cantidad = $client->call('AltaMaterial',array('nombre' => $obj->Nombre,'precio' => $obj->Precio, 'tipo' =>$obj->Tipo));        //Si la cantidad es mayor a Cero(0), se inserto correctamente		if ($cantidad>0) {			$obj->Exito = TRUE;            $obj->Mensaje = "Fue agregado Satisfactorialmente";            $obj->Cantidad = $cantidad;					} else {						$obj->Exito = FALSE;			$obj->Mensaje = "ERROR al agregar";            $obj->Cantidad = $cantidad;		}        //Devuelvo el objeto        echo json_encode($obj);		        break;    case "MODIFICAR_USUARIO":                        //Capturo la persona a modificar         $obj = json_decode(json_encode($_POST['usuario']));        $obj->Exito = TRUE;        $obj->Mensaje = "";				$obj->Indice = $client->call('Modificar', array('id' => $obj->id, 'nombre' => $obj->nombre, 'email' => $obj->email, 'perfil' => $obj->perfil));                      if(isset($obj->Indice)) {            $obj->Mensaje = "Se modifico correctamente.";            } else {            $obj->Mensaje = " ";            }                echo json_encode($obj);        break;            case "ELIMINAR_USUARIO":		        //Capturo el codigo a eliminar        $IdUsuario = $_POST['id_usuario'];                //Llamada al WS para dar de baja un usuario  		echo $client->call('Baja',array("id_usuario" => $IdUsuario));        break;    case "LOGOUT":		        //Borro las variables de session		session_unset();        //Termino la session		session_destroy();	        break;    default:        echo ":(";}